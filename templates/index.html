{% extends "base.html" %}

{% block title %}Ahab Infrastructure Automation{% endblock %}

{% block content %}
{# Page Header with Breadcrumbs - Validates: Requirements 1.2, 4.3 #}
{% set page_title = "Dashboard" %}
{% set page_description = "Manage your infrastructure automation workstation and services" %}
{% set page_icon = "home" %}
{% include 'components/page-header.html' %}

{# Status Indicator Section - Validates: Requirements 6.4, 13.1 #}
<div id="status-section" class="status-section" role="region" aria-label="System Status">
    <div class="status-cards">
        <div id="workstation-status" class="status-card">
            <div class="status-card-icon" aria-hidden="true">üñ•Ô∏è</div>
            <div class="status-card-content">
                <h2 class="status-card-title">Workstation</h2>
                <p class="status-card-value" id="workstation-status-text">Loading...</p>
                <p class="status-card-meta" id="workstation-status-meta"></p>
            </div>
        </div>
        
        <div id="services-status" class="status-card">
            <div class="status-card-icon" aria-hidden="true">üì¶</div>
            <div class="status-card-content">
                <h2 class="status-card-title">Services</h2>
                <p class="status-card-value" id="services-status-text">Loading...</p>
                <p class="status-card-meta" id="services-status-meta"></p>
            </div>
        </div>
    </div>
</div>

{# Action Cards Section - Progressive Disclosure - Validates: Requirements 16.1, 16.2 #}
<div id="action-cards-section" class="action-cards-section" role="region" aria-label="Available Actions">
    <h2 class="section-heading">What would you like to do?</h2>
    <div id="action-cards-container" class="cards-grid">
        {# Action cards will be dynamically inserted here based on system state #}
        <div class="loading-placeholder">
            <div class="spinner" aria-label="Loading actions"></div>
            <p>Loading available actions...</p>
        </div>
    </div>
</div>

{# Output Terminal - Hidden until command runs - Validates: Requirements 9.2, 9.3 #}
<div id="output-section" class="output-section" style="display: none;" role="region" aria-label="Command Output">
    <div class="output-header">
        <h2 class="output-title">Command Output</h2>
        <button class="btn btn-secondary btn-sm" onclick="hideOutput()" aria-label="Hide command output">
            Hide Output
        </button>
    </div>
    <div id="command-output" class="terminal" role="log" aria-live="polite" aria-atomic="false"></div>
    <div class="output-actions">
        <button class="btn btn-secondary" onclick="hideOutput()">
            Close
        </button>
    </div>
</div>

{# Loading State Component - Validates: Requirements 9.3 #}
{% include 'components/loading-state.html' %}

<style>
/* Status Section Styles */
.status-section {
    margin-bottom: var(--space-xl, 2rem);
}

.status-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg, 1.5rem);
    margin-bottom: var(--space-xl, 2rem);
}

.status-card {
    display: flex;
    align-items: flex-start;
    gap: var(--space-md, 1rem);
    padding: var(--space-lg, 1.5rem);
    background: white;
    border: 1px solid var(--gray-300, #dee2e6);
    border-radius: 0.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    transition: all var(--transition-base, 250ms ease);
}

.status-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
}

.status-card-icon {
    font-size: 2rem;
    line-height: 1;
}

.status-card-content {
    flex: 1;
    min-width: 0;
}

.status-card-title {
    margin: 0 0 var(--space-xs, 0.25rem) 0;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--gray-600, #6c757d);
}

.status-card-value {
    margin: 0 0 var(--space-xs, 0.25rem) 0;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--ahab-navy, #003d7a);
}

.status-card-meta {
    margin: 0;
    font-size: 0.875rem;
    color: var(--gray-600, #6c757d);
}

/* Status Colors */
.status-success {
    color: var(--success, #28a745);
}

.status-warning {
    color: var(--warning, #ffc107);
}

.status-error {
    color: var(--danger, #dc3545);
}

.status-neutral {
    color: var(--gray-600, #6c757d);
}

/* Action Cards Section */
.action-cards-section {
    margin-bottom: var(--space-xl, 2rem);
}

.section-heading {
    margin: 0 0 var(--space-lg, 1.5rem) 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--ahab-navy, #003d7a);
}

/* Loading Placeholder */
.loading-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-xl, 2rem);
    text-align: center;
    color: var(--gray-600, #6c757d);
}

.spinner {
    width: 3rem;
    height: 3rem;
    border: 3px solid var(--gray-300, #dee2e6);
    border-top-color: var(--ahab-blue, #0066cc);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: var(--space-md, 1rem);
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Output Section Styles */
.output-section {
    margin-top: var(--space-xl, 2rem);
    padding: var(--space-lg, 1.5rem);
    background: var(--gray-900, #212529);
    border-radius: 0.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.output-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md, 1rem);
}

.output-title {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: white;
}

.terminal {
    background: var(--gray-900, #212529);
    color: #00ff00;
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.875rem;
    padding: var(--space-md, 1rem);
    border-radius: 0.25rem;
    max-height: 400px;
    overflow-y: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

.terminal-prompt {
    color: #00aaff;
    font-weight: bold;
}

.terminal-info {
    color: #ffaa00;
}

.terminal-success {
    color: #00ff00;
    font-weight: bold;
}

.terminal-error {
    color: #ff0000;
    font-weight: bold;
}

.output-actions {
    margin-top: var(--space-md, 1rem);
    display: flex;
    justify-content: flex-end;
}

/* Responsive Design (WEB 8.2) */
@media (max-width: 768px) {
    .status-cards {
        grid-template-columns: 1fr;
        gap: var(--space-md, 1rem);
    }
    
    .status-card {
        padding: var(--space-md, 1rem);
    }
    
    .status-card-icon {
        font-size: 1.5rem;
    }
    
    .status-card-value {
        font-size: 1.25rem;
    }
    
    .section-heading {
        font-size: 1.25rem;
    }
}

/* Print Styles */
@media print {
    .output-section,
    .output-actions {
        display: none;
    }
    
    .status-card {
        break-inside: avoid;
    }
}
</style>
{% endblock %}
